{"version":3,"sources":["../lib/Controller.js"],"names":["Controller","actionName","middlewares","beforeMiddlewares","slice","concat","push","name","controller","action","req","res","next","call"],"mappings":";;;;;;;;;;;;;;;;IAAqBA,U;;;;;;;2BAgBZC,U,EAAYC,W,EAAa;AAC9B,WAAKC,iBAAL,GAAyB,KAAKA,iBAAL,IAA0B,EAAnD;AACA,WAAKA,iBAAL,CAAuBF,UAAvB,IAAqC,KAAKE,iBAAL,CAAuBF,UAAvB,KAAsC,EAA3E;;AAEA,UAAIC,YAAYE,KAAhB,EAAuB;AACrB,aAAKD,iBAAL,CAAuBF,UAAvB,EAAmCI,MAAnC,CAA0CH,WAA1C;AACD,OAFD,MAEO;AACL,aAAKC,iBAAL,CAAuBF,UAAvB,EAAmCK,IAAnC,CAAwCJ,WAAxC;AACD;AACF;;;2BAvBaK,I,EAAM;AAClB,UAAMC,aAAa,IAAI,IAAJ,EAAnB;;AAEA,aAAO;AACLC,gBAAQ,gBAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BJ,qBAAWE,GAAX,GAAiBA,GAAjB;AACAF,qBAAWG,GAAX,GAAiBA,GAAjB;AACAH,qBAAWI,IAAX,GAAkBA,IAAlB;AACAJ,qBAAWD,IAAX,EAAiBM,IAAjB,CAAsBL,UAAtB;AACD,SANI;AAOLN,qBAAa,CAACM,WAAWL,iBAAX,IAAgC,EAAjC,EAAqCI,IAArC;AAPR,OAAP;AASD;;;;;kBAdkBP,U","file":"Controller.js","sourcesContent":["export default class Controller {\n\n  static action(name) {\n    const controller = new this();\n\n    return {\n      action: (req, res, next) => {\n        controller.req = req;\n        controller.res = res;\n        controller.next = next;\n        controller[name].call(controller);\n      },\n      middlewares: (controller.beforeMiddlewares || {})[name],\n    };\n  }\n\n  before(actionName, middlewares) {\n    this.beforeMiddlewares = this.beforeMiddlewares || {};\n    this.beforeMiddlewares[actionName] = this.beforeMiddlewares[actionName] || [];\n\n    if (middlewares.slice) {\n      this.beforeMiddlewares[actionName].concat(middlewares);\n    } else {\n      this.beforeMiddlewares[actionName].push(middlewares);\n    }\n  }\n}\n"]}